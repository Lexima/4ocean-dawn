
{%- style -%}



{%- endstyle -%}

{% javascript %}

class StickyProduct extends HTMLElement {
    constructor() {
        super();

    }

    connectedCallback() {
        this.target = document.querySelector('product')
        this.headerBounds = {};
        this.onScrollHandler = this.onScroll.bind(this);


        window.addEventListener('scroll', this.onScrollHandler, false);
        this.createObserver();


    }

    createObserver() {
        let observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                console.log(entry);
            })
          //this.headerBounds = entries[0].intersectionRect;
          observer.disconnect();
        });
  
        observer.observe(this.target);
      }

    onScroll() {
    }
}

customElements.define('sticky-product', StickyProduct);




{% endjavascript %}

<sticky-product>
    {%- render 'product-banner', show_price: section.settings.show_price, fixed: true -%}
</sticky-product>


{% schema %}

{
    "name": "Sticky product",
    "tag": "section",
    "class": "section",
    "settings": [
        {
            "type": "checkbox",
            "id": "show_price",
            "default": true,
            "label": "Show price"
        }
    ],
    "presets": [
        {
            "name": "Sticky Product"
        }
    ]
}

{% endschema %}
